(function(b,M,L,a){var A;var U;var J;var c;var X;var C=0;var D="img";var Q="src";var T=a;var K=function(f,e){this.$element=f,this.defaults={"prevEndInfo":"亲，已经到最顶了","nextEndInfo":"亲，已经到最低了","screenInfo":"浏览器不支持全屏API或已被禁用","scrollTopTime":100},this.options=b.extend({},this.defaults,e)};K.prototype.addClickImg=function(e){var i=e.children();for(var h in i){if(isNaN(h)){break}var f=I(b(i[h]));var g=b._data(f[0],"events");if(g&&g["click"]){continue}else{f.bind("click",function(){O();if(W()){H()}R(this);c=this})}}};K.prototype.refresh=function(e){X.addClickImg(J)};b.fn.albumPlug=function(e){U=this.attr("id");J=this;X=new K(this,e);A=X.options;X.addClickImg(this);return X};function I(f){var e=f[0].tagName.toLowerCase();var g=f;while(e!=D){g=g.children(":first");e=g[0].tagName.toLowerCase()}return g}function B(e){return e.attr(Q)}function F(e){var g=b(e).parent();var f;while(g.attr("id")!=U){f=g;g=g.parent()}var h=f.prev();if(h[0]==T){alert(A.prevEndInfo);return}c=I(h);return B(c)}function G(e){var g=b(e).parent();var f;while(g.attr("id")!=U){f=g;g=g.parent()}var h=f.next();if(h[0]==T){alert(A.nextEndInfo);return}c=I(h);return B(c)}function R(e){P(e)}function V(){var e=F(c);Z(e)}function Y(e){var f=G(c);Z(f)}function Z(e){b(".showBigPicDiv > img").attr(Q,e)}function S(){return b(".showBigPicDiv").val()==T}function H(){var e=L.body;if(e.webkitRequestFullScreen){e.webkitRequestFullScreen()}else{if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else{if(e.requestFullScreen){e.requestFullscreen()}else{notice.notice_show(A.screenInfo,null,null,null,true,true)}}}}function N(){if(L.exitFullscreen){L.exitFullscreen()}else{if(L.mozCancelFullScreen){L.mozCancelFullScreen()}else{if(L.webkitExitFullscreen){L.webkitExitFullscreen()}else{notice.notice_show(A.screenInfo,null,null,null,true,true)}}}}function W(){var e=navigator.userAgent;var g=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var h=true;for(var f=0;f<g.length;f++){if(e.indexOf(g[f])>0){h=false;break}}return h}function O(){if(L.documentElement&&L.documentElement.scrollTop){C=L.documentElement.scrollTop}else{if(L.body){C=L.body.scrollTop}}return C}function d(){b("html,body").animate({"scrollTop":C},A.scrollTopTime)}function P(e){var f=B(I(b(e)));var g="<div class='showBigPicDiv'>   <img src='"+f+"' />   <div  class='leftDiv'></div>   <div  class='rightDiv'></div>   <span class='exitDiv'>X</span></div>";b("body").append(g);b(".leftDiv").bind("click",function(){V()});b(".rightDiv").bind("click",function(){Y()});b(".exitDiv").bind("click",function(){N();b(".showBigPicDiv").remove();d()})}M.onresize=function(){if(!E()){N();b(".showBigPicDiv").remove();d()}};function E(){var e=L.fullscreenElement||L.mozFullScreenElement||L.webkitFullscreenElement;if(e===a){e=false}return e}b(L).keydown(function(g){var f=g||M.event;var h=f.keyCode||f.which;switch(h){case 27:if(S()){return}N();b(".showBigPicDiv").remove();d();break;case 39:if(S()){return}Y();break;case 37:if(S()){return}V();break}})})(jQuery,window,document);