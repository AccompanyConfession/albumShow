(function(a,M,L,Z){var A;var U;var J;var b;var W;var C=0;var D="img";var Q="src";var T=Z;var K=function(e,d){this.$element=e,this.defaults={"prevEndInfo":"亲，已经到最顶了","nextEndInfo":"亲，已经到最低了","screenInfo":"浏览器不支持全屏API或已被禁用","scrollTopTime":100},this.options=a.extend({},this.defaults,d)};K.prototype.addClickImg=function(d){var h=d.children();for(var g in h){if(isNaN(g)){break}var e=I(a(h[g]));var f=a._data(e[0],"events");if(f&&f["click"]){continue}else{e.bind("click",function(){O();H();R(this);b=this})}}};K.prototype.refresh=function(d){W.addClickImg(J)};a.fn.albumPlug=function(d){U=this.attr("id");J=this;W=new K(this,d);A=W.options;W.addClickImg(this);return W};function I(e){var d=e[0].tagName.toLowerCase();var f=e;while(d!=D){f=f.children(":first");d=f[0].tagName.toLowerCase()}return f}function B(d){return d.attr(Q)}function F(d){var f=a(d).parent();var e;while(f.attr("id")!=U){e=f;f=f.parent()}var g=e.prev();if(g[0]==T){alert(A.prevEndInfo);return}b=I(g);return B(b)}function G(d){var f=a(d).parent();var e;while(f.attr("id")!=U){e=f;f=f.parent()}var g=e.next();if(g[0]==T){alert(A.nextEndInfo);return}b=I(g);return B(b)}function R(d){P(d)}function V(){var d=F(b);Y(d)}function X(d){var e=G(b);Y(e)}function Y(d){a(".showBigPicDiv > img").attr(Q,d)}function S(){return a(".showBigPicDiv").val()==T}function H(){var d=L.body;if(d.webkitRequestFullScreen){d.webkitRequestFullScreen()}else{if(d.mozRequestFullScreen){d.mozRequestFullScreen()}else{if(d.requestFullScreen){d.requestFullscreen()}else{notice.notice_show(A.screenInfo,null,null,null,true,true)}}}}function N(){if(L.exitFullscreen){L.exitFullscreen()}else{if(L.mozCancelFullScreen){L.mozCancelFullScreen()}else{if(L.webkitExitFullscreen){L.webkitExitFullscreen()}else{notice.notice_show(A.screenInfo,null,null,null,true,true)}}}}function O(){if(L.documentElement&&L.documentElement.scrollTop){C=L.documentElement.scrollTop}else{if(L.body){C=L.body.scrollTop}}return C}function c(){a("html,body").animate({"scrollTop":C},A.scrollTopTime)}function P(d){var e=B(I(a(d)));var f="<div class='showBigPicDiv'>   <img src='"+e+"' />   <div  class='leftDiv'></div>   <div  class='rightDiv'></div>   <span class='exitDiv'>X</span></div>";a("body").append(f);a(".leftDiv").bind("click",function(){V()});a(".rightDiv").bind("click",function(){X()});a(".exitDiv").bind("click",function(){N();a(".showBigPicDiv").remove();c()})}M.onresize=function(){if(!E()){N();a(".showBigPicDiv").remove();c()}};function E(){var d=L.fullscreenElement||L.mozFullScreenElement||L.webkitFullscreenElement;if(d===Z){d=false}return d}a(L).keydown(function(f){var d=f||M.event;var g=d.keyCode||d.which;switch(g){case 27:if(S()){return}N();a(".showBigPicDiv").remove();c();break;case 39:if(S()){return}X();break;case 37:if(S()){return}V();break}})})(jQuery,window,document);